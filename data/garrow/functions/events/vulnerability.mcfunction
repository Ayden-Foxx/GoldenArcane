## # Ayden_Foxx | September 1st, 2024
# Toggles Golden Arrow's vulnerability; Disables most attack functions while active.

# Get current vulnerability state.
tag @s[tag=!goldark.vulnerable] add goldark.add_vulnerability
tag @s[tag=goldark.vulnerable] add goldark.revoke_vulnerability

# Grant Vulnerability
execute if entity @s[tag=goldark.add_vulnerability] run function garrow:weapons/none

effect clear @s[tag=goldark.add_vulnerability]

data merge entity @s[tag=goldark.add_vulnerability] { Attributes: [ { Name: "generic.armor", Base: 0f }, { Name: "generic.armor_toughness", Base: 0f }, { Name: "generic.attack_damage", Base: 0f }, { Name:"generic.knockback_resistance", Base: 0f }, { Name: "generic.follow_range", Base: 0f }, { Name: "generic.movement_speed", Base: 0.1f } ] }

tag @s[tag=goldark.add_vulnerability] add goldark.vulnerable
tag @s[tag=goldark.add_vulnerability] remove goldark.add_vulnerability

# Revoke Vulnerability
data merge entity @s[tag=goldark.revoke_vulnerability] { Attributes: [ { Name: "generic.armor", Base: 4f }, { Name: "generic.armor_toughness", Base: 4f }, { Name: "generic.attack_damage", Base: 3f }, { Name:"generic.knockback_resistance", Base: 0.2f }, { Name: "generic.follow_range", Base: 24f }, { Name: "generic.movement_speed", Base: 0.3f } ] }

effect give @s[tag=goldark.revoke_vulnerability] resistance infinite 1 true
effect give @s[tag=goldark.revoke_vulnerability] fire_resistance infinite 0 true

tag @s[tag=goldark.revoke_vulnerability] remove goldark.vulnerable
tag @s[tag=goldark.revoke_vulnerability] remove goldark.revoke_vulnerability